<section class="myBody">
  <div class="giantCircle">
    <div class="centerCircle" >

      <div :class="legend.length == 0? 'uploaderImage' : 'navItem item1'" >
        <input
          type="file"
          name="file"
          id="file"
          ref="myFiles"
          class="inputfile"
          @change="uploadImgOnFront"
          accept="image/png, image/jpeg"
          multiple="multiple"
        />

        <label for="file" v-if="legend.length == 0">
          <span>Ajouter des images</span>
        </label>
        <label for="file" v-else >Importer + d'image(s)</label>

      </div>

      <div class="nokeyword" v-if="keywords.length == 0 && legend.length !== 0">
        Pour commmencer,<br/>
        ajoutez un  diapoarma en cliquant ci-dessous
        <br/>
       <a
          class="myButton"
          @click="onClickAddKeyword = !onClickAddKeyword"
        >
        Ajouter un diaporama

        </a>
      </div>
      <div class="nokeyword" v-if="files && isAlreadyOnDb()">
          Cette image à déja été télecharger
          <br/>
          Elle ne sera donc pa ré-envoyée <br/>
          Vous pouvez modifier toutes les données à son sujet à cette page (lien) en la modifiant dans un diaporama la contennant
      </div>

      <currentImgComponent 
        v-for="(image, indexImg) in imageUrlList"
        :key="image"
        v-bind:class="currentImg==indexImg ? 'containerImage' : 'hide'"
        :isDelete="fileIsDeleted[indexImg]"
        :imgUrl="image"
        :currentIndex="indexImg"
        :kwList="keywords"
        :selectKW="selectedKeyWords"
        :legende="legend"
        :desc="description"
        :upLegend="updateLegend"
        :upDesc="updateDescription"
        ></currentImgComponent>


      <a @click="confirmBeforeLeave" class="navItem backBtn retourBtn" >
        <i class="fas fa-arrow-circle-left backFa"></i>
        Retour
      </a>

      <!-- <div v-if="legend.length !== 0" class="navItem item1" style="color: white;">
        <input
          type="file"
          name="file"
          id="file"
          ref="myFiles"
          class="inputfile"
          @change="uploadImgOnFront"
          accept="image/png, image/jpeg"
          multiple="multiple"
          
        />
        <label for="file">Importer + d'image(s)</label>
      </div> -->

      <a
        v-if="fileIsDeleted.length !== 0 && fileIsDeleted[currentImg] !== 'deleted'"
        class="navItem backBtn item7"
        @click="deleteImg()"
        v-model="fileIsDeleted[currentImg]"
      >
        <i class="fas fa-skull-crossbones navFa"></i>
        <span>
          Supprimer cette image
        </span>
      </a>
      <a
      v-else-if="fileIsDeleted.length !== 0 && fileIsDeleted[currentImg] === 'deleted'"
      class="navItem backBtn item7"
      @click="deleteImg()"
      v-model="fileIsDeleted[currentImg]"

    >
      <i class="fas fa-skull-crossbones navFa"></i>
      <span >
        Récuperer l'image
      </span>
    </a>        
      <!-- LEFT NAV BUTON -->
      <a
        v-if="legend.length !== 0"
        class="arrowNavItem item4"
        v-on:click="next(-1)"
      >
        <i class="fas fa-arrow-circle-left fa-4x"></i>
      </a>
      <!-- INDEX OF IMAGE -->
      <a v-if="legend.length !== 0" class="paginationNavItem item8">
        {{ currentImg+1 }} / {{ legend.length }}
      </a>

      <!-- ::::::::::::::::::::::::::::::: -->
      <!-- :::::::::::::RIGHT::::::::::::: -->
      <!-- ::::::::::::::::::::::::::::::: -->
      


      <a
        v-if="legend.length !== 0 "
        class="navItem right itemR1"
        @click="onClickAddKeyword = !onClickAddKeyword"
      >
       Ajouter un diaporama

      </a>
      <div class="itemR1">
        <div v-if="onClickAddKeyword" class="addkeyword">
          <span class="closePanel" @click="onClickAddKeyword = false">X</span>
          <label for="newKeyword" class="">Créer un diaporama</label>          
          <div>
            <input type="text" v-model="newKeyword" />
            <!-- <input class="submit" type="submit" @click="createNewKeyWord" /> -->
            <i class="fas fa-plus" @click="createNewKeyWord(false)"></i>

            <a
              class="validateAll "
              type="submit"
              @click="createNewKeyWord(true)"
            >
              valider
            </a>
          </div>
        </div>
      </div>

      <a
        v-if="legend.length !== 0"
        class="arrowNavItem right itemR4"
        v-on:click="next(1)"
      >
        <i class="fas fa-arrow-circle-right fa-4x"></i>
      </a>

      <button
      v-if="files.length !== 0 && nbrImageLeft == 0"
      class="submit navItem right itemR8"
      @click="onClicPrepareDataBeforeSending"
      
    >
      <span>Enregistrer</span>

    </button>
      <button
        v-else-if="files.length !== 0 && selectedKeyWords[currentImg].length > 0"
        class="submit navItem right itemR8"
        @click="missingImgKeywordMsg"
      >
      Enregistrer ({{ nbrImageLeft }} images restantes)
    </button>
      <button
        v-else-if="files.length !== 0"
        class="submit navItem right itemR8"
        @click=" $store.commit('increment', 'Chaque image doit être associé à au moins une image. Selectionnez un des mot-clefs présent sous l\'image ou créez-en un nouveau en cliquant sur le bouton ajouter un diaporama')"
      >
       Enregistrer ({{ nbrImageLeft }} images restantes)
      </button>

    </div>
  </div>
  <phpResponse
    :reponse="phpResponse"
    v-on:resetReponse="phpResponse=''"
  ></phpResponse>

  <!-- </form> -->
</section>
